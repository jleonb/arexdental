"use strict";var Card=function(t,e){function n(t,e){this.id=t,this._el=e,this._container=$(this._el).find(i.container)[0],this._clip=$(this._el).find(i.clip)[0],this._content=$(this._el).find(i.content)[0],this.isOpen=!1,this._TL=null}var i={container:".card__container",content:".card__content",clip:".clip"},o={containerClosed:"card__container--closed",bodyHidden:"body--hidden"};return n.prototype.openCard=function(t){this._TL=new TimelineLite;var e=this._slideContentDown(),n=this._clipImageIn(),i=this._floatContainer(t),o=(this._clipImageOut(),this._slideContentUp());return this._TL.add(e),this._TL.add(n,0),this._TL.add(i,"-="+.6*n.duration()),this._TL.add(o),this.isOpen=!0,this._TL},n.prototype._slideContentDown=function(){var e=TweenLite.to(this._content,.8,{y:t.innerHeight,ease:Expo.easeInOut});return e},n.prototype._clipImageIn=function(){var t=new TimelineLite,e=[[0,1200],[0,0],[1920,0],[1920,1200]],n=[[916,430],[1125,643],[960,607],[793,570]],i=[];return e.forEach(function(e,o){var s=TweenLite.to(e,1.5,n[o]);n[o].onUpdate=function(){i.push(e.join()),i.length===n.length&&($(this._clip).attr("points",i.join(" ")),i=[])}.bind(this),s.vars.ease=Expo.easeInOut,t.add(s,0)},this),t},n.prototype._floatContainer=function(e){$(document.body).addClass(o.bodyHidden);var n=new TimelineLite,i=this._container.getBoundingClientRect(),s=t.innerWidth,r={width:0,x:i.left+i.width/2,y:i.top+i.height/2};return n.set(this._container,{width:i.width,height:i.height,x:i.left,y:i.top,position:"fixed",overflow:"hidden"}),n.to([this._container,r],2,{width:s,height:"100%",x:s/2,y:0,xPercent:-50,ease:Expo.easeInOut,clearProps:"all",className:"-="+o.containerClosed,onUpdate:e.bind(this,r),onComplete:function(){$(this._container).addClass("card__container--fix-image")}.bind(this)}),n},n.prototype._clipImageOut=function(){var t=this._clipImageIn();return t.reverse(),t},n.prototype._slideContentUp=function(){var t=TweenLite.to(this._content,1,{y:0,clearProps:"all",ease:Expo.easeInOut});return t},n.prototype.closeCard=function(){return TweenLite.to(this._container,.4,{scrollTo:{y:0},onComplete:function(){$(this._container).css("overflow","hidden")}.bind(this),ease:Power2.easeOut}),this._TL.eventCallback("onReverseComplete",function(){TweenLite.set([this._container,this._content],{clearProps:"all"}),$(document.body).removeClass(o.bodyHidden),this.isOpen=!1}.bind(this)),this._TL.reverse()},n.prototype.hideCard=function(){var t=TweenLite.to(this._el,.4,{scale:.8,autoAlpha:0,transformOrigin:"center bottom",ease:Expo.easeInOut});return t},n.prototype.showCard=function(){var t=TweenLite.to(this._el,.5,{scale:1,autoAlpha:1,clearProps:"all",ease:Expo.easeInOut});return t},n}(window);