"use strict";var demo=function(n,a){function t(){var a=Trianglify({width:n.innerWidth,height:n.innerHeight,cell_size:90,variance:1,stroke_width:1,x_colors:"Purples"}).svg();i(a),r()}function i(n){$(l.pattern).append(n),h.paths=[].slice.call(n.childNodes),h.points=[],h.paths.forEach(function(n){$(n).attr("class",p.polygon);var a=n.getBoundingClientRect(),t={x:a.left+a.width/2,y:a.top+a.height/2};h.points.push(t)}),$(l.pattern).removeClass(p.patternHidden)}function r(){var n=$(l.card);$.each(n,function(n,a){var t=new Card(a,n);u[a]={card:t};var i=$(n).find(l.cardImage),r=$(n).find(l.cardClose);$(i).on("click",e.bind(this,!0,a)),$(r).on("click",e.bind(this,!1,a))})}function e(n,a,t){var i=u[a].card;if(!i.isOpen||!n){var r=new TimelineLite({paused:!0}),e=d(a);if(i.isOpen){var s=i.closeCard(),l=.8*s.duration();r.add(s),r.add(e,l)}else o(t.target),r.add(e),r.add(i.openCard(c),0);r.play()}}function d(n){var a=new TimelineLite,t=u[n].card;for(var i in u){var r=u[i].card;r.id===n||t.isOpen||a.add(r.hideCard(),0),r.id!==n&&t.isOpen&&a.add(r.showCard(),0)}return a}function o(n){var a=$(n).attr("xlink:href");$(l.pattern).css("background-image","url("+a+")")}function c(n){var a=n.width/2,t={x:n.x,y:n.y};h.points.forEach(function(n,i){s(n,a,t)?$(h.paths[i]).attr("class",p.polygon+" "+p.polygonHidden):$(h.paths[i]).attr("class",p.polygon)})}function s(n,a,t){var i=n.x,r=n.y,e=t.x,d=t.y,o=a*a,c=Math.pow(i-e,2)+Math.pow(r-d,2)<=o;return c}var l={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".card__btn-close"},p={patternHidden:"pattern--hidden",polygon:"polygon",polygonHidden:"polygon--hidden"},h={paths:null,points:null},u={};return{init:t}}(window);window.onload=demo.init;