"use strict";var demo=function(n,a){function i(){var a=Trianglify({width:n.innerWidth,height:n.innerHeight,cell_size:120,variance:1,stroke_width:.5,color_function:function(n,a){return"#7cc576"}}).svg();t(a),d()}function t(n){$(l.pattern).append(n),s.paths=[].slice.call(n.childNodes),s.points=[],s.paths.forEach(function(n){$(n).attr("class",p.polygon+" "+p.polygonHidden);var a=n.getBoundingClientRect(),i={x:a.left+a.width/2,y:a.top+a.height/2};s.points.push(i)}),$(l.pattern).removeClass(p.patternHidden)}function d(){var n=$(l.card);$.each(n,function(n,a){var i=new Card(a,n);h[a]={card:i};var t=$(n).find(l.cardImage),d=$(n).find(l.cardClose);$(t).on("click",e.bind(this,!0,a)),$(d).on("click",e.bind(this,!1,a))})}function e(n,a,i){var t=h[a].card;if(!t.isOpen||!n){var d=new TimelineLite({paused:!0}),e=r(a);if(t.isOpen){var c=t.closeCard(),l=.8*c.duration();d.add(c),d.add(e,l)}else d.add(e),d.add(t.openCard(o),0);d.play()}}function r(n){var a=new TimelineLite,i=h[n].card;for(var t in h){var d=h[t].card;d.id===n||i.isOpen||a.add(d.hideCard(),0),d.id!==n&&i.isOpen&&a.add(d.showCard(),0)}return a}function o(n){var a=n.width/2,i={x:n.x,y:n.y};s.points.forEach(function(n,t){c(n,a,i)?$(s.paths[t]).attr("class",p.polygon):$(s.paths[t]).attr("class",p.polygon+" "+p.polygonHidden)})}function c(n,a,i){var t=n.x,d=n.y,e=i.x,r=i.y,o=a*a,c=Math.pow(t-e,2)+Math.pow(d-r,2)<=o;return c}var l={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".card__btn-close"},p={patternHidden:"pattern--hidden",polygon:"polygon",polygonHidden:"polygon--hidden"},s={paths:null,points:null},h={};return{init:i}}(window);window.onload=demo.init;